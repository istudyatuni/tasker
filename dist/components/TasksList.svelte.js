import{SvelteComponent as D,append as w,attr as m,check_outros as d,component_subscribe as v,create_component as $,destroy_component as j,detach as _,element as b,empty as h,group_outros as g,init as E,insert as a,mount_component as N,noop as k,outro_and_destroy_block as T,safe_not_equal as F,space as C,transition_in as u,transition_out as p,update_keyed_each as I}from"../../snowpack/pkg/svelte/internal.js";import M from"./TaskItem.svelte.js";import{filtered as G,deleted as H}from"../stores/tasks.js";import{settings as J}from"../stores/settings.js";function q(o,e,n){const s=o.slice();return s[5]=e[n],s}function A(o,e,n){const s=o.slice();return s[5]=e[n],s}function K(o){let e=[],n=new Map,s,c,r=o[1].reverse_list?B(o[0]):o[0];const i=l=>l[5].task_id;for(let l=0;l<r.length;l+=1){let t=q(o,r,l),f=i(t);n.set(f,e[l]=S(f,t))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=h()},m(l,t){for(let f=0;f<e.length;f+=1)e[f].m(l,t);a(l,s,t),c=!0},p(l,t){t&3&&(r=l[1].reverse_list?B(l[0]):l[0],g(),e=I(e,t,i,1,l,r,n,s.parentNode,T,S,s,q),d())},i(l){if(!c){for(let t=0;t<r.length;t+=1)u(e[t]);c=!0}},o(l){for(let t=0;t<e.length;t+=1)p(e[t]);c=!1},d(l){for(let t=0;t<e.length;t+=1)e[t].d(l);l&&_(s)}}}function O(o){let e;return{c(){e=b("p"),e.textContent="All tasks are finished!",m(e,"class","notification is-success")},m(n,s){a(n,e,s)},p:k,i:k,o:k,d(n){n&&_(e)}}}function P(o){let e;return{c(){e=b("p"),e.textContent="The task list is empty",m(e,"class","notification is-success")},m(n,s){a(n,e,s)},p:k,i:k,o:k,d(n){n&&_(e)}}}function Q(o){let e=[],n=new Map,s,c,r=o[4];const i=l=>l[5].task_id;for(let l=0;l<r.length;l+=1){let t=A(o,r,l),f=i(t);n.set(f,e[l]=z(f,t))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=h()},m(l,t){for(let f=0;f<e.length;f+=1)e[f].m(l,t);a(l,s,t),c=!0},p(l,t){t&16&&(r=l[4],g(),e=I(e,t,i,1,l,r,n,s.parentNode,T,z,s,A),d())},i(l){if(!c){for(let t=0;t<r.length;t+=1)u(e[t]);c=!0}},o(l){for(let t=0;t<e.length;t+=1)p(e[t]);c=!1},d(l){for(let t=0;t<e.length;t+=1)e[t].d(l);l&&_(s)}}}function L(o){let e,n,s,c;return n=new M({props:{task:o[5]}}),{c(){e=b("div"),$(n.$$.fragment),s=C(),m(e,"class","box")},m(r,i){a(r,e,i),N(n,e,null),w(e,s),c=!0},p(r,i){const l={};i&3&&(l.task=r[5]),n.$set(l)},i(r){c||(u(n.$$.fragment,r),c=!0)},o(r){p(n.$$.fragment,r),c=!1},d(r){r&&_(e),j(n)}}}function S(o,e){let n,s,c,r=(!e[5].finished||e[1].show_finished)&&L(e);return{key:o,first:null,c(){n=h(),r&&r.c(),s=h(),this.first=n},m(i,l){a(i,n,l),r&&r.m(i,l),a(i,s,l),c=!0},p(i,l){e=i,!e[5].finished||e[1].show_finished?r?(r.p(e,l),l&3&&u(r,1)):(r=L(e),r.c(),u(r,1),r.m(s.parentNode,s)):r&&(g(),p(r,1,1,()=>{r=null}),d())},i(i){c||(u(r),c=!0)},o(i){p(r),c=!1},d(i){i&&_(n),r&&r.d(i),i&&_(s)}}}function z(o,e){let n,s,c,r;return s=new M({props:{task:e[5]}}),{key:o,first:null,c(){n=b("div"),$(s.$$.fragment),c=C(),m(n,"class","box"),this.first=n},m(i,l){a(i,n,l),N(s,n,null),w(n,c),r=!0},p(i,l){e=i;const t={};l&16&&(t.task=e[5]),s.$set(t)},i(i){r||(u(s.$$.fragment,i),r=!0)},o(i){p(s.$$.fragment,i),r=!1},d(i){i&&_(n),j(s)}}}function R(o){let e,n,s,c;const r=[Q,P,O,K],i=[];function l(t,f){return t[1].show_trash?0:t[3]?1:t[2]?2:3}return e=l(o,-1),n=i[e]=r[e](o),{c(){n.c(),s=h()},m(t,f){i[e].m(t,f),a(t,s,f),c=!0},p(t,[f]){let y=e;e=l(t,f),e===y?i[e].p(t,f):(g(),p(i[y],1,1,()=>{i[y]=null}),d(),n=i[e],n?n.p(t,f):(n=i[e]=r[e](t),n.c()),u(n,1),n.m(s.parentNode,s))},i(t){c||(u(n),c=!0)},o(t){p(n),c=!1},d(t){i[e].d(t),t&&_(s)}}}function B(o){return o.slice().reverse()}function U(o,e,n){let s,c,r,i,l;return v(o,G,t=>n(0,r=t)),v(o,J,t=>n(1,i=t)),v(o,H,t=>n(4,l=t)),o.$$.update=()=>{if(o.$$.dirty&1){e:n(3,s=r.length===0)}if(o.$$.dirty&3){e:n(2,c=!i.show_finished&&r.every(t=>t.finished))}},[r,i,c,s,l]}class V extends D{constructor(e){super();E(this,e,U,R,F,{})}}export default V;
