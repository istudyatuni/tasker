import{get as o}from"../../snowpack/pkg/svelte/store.js";import{LoadTaskById as a}from"./LoadTasks.js";import{tasks as r}from"../stores/tasks.js";import{notify as t}from"../utils/notify.js";import{isOffline as f}from"../utils/offline.js";import{writeFile as n}from"../utils/fs.js";export async function UpdateTaskLocal(s){return s.name?(r.update(s.task_id,s),await n(o(r)),t("Task updated","success"),!0):(t("Error: name is required","error"),!1)}export async function UpdateTask(s){if(f())return UpdateTaskLocal(s);let e=await(await fetch("/api/update",{method:"PUT",body:JSON.stringify(s)})).json();if(e.status&&s.task_id){const i=await a(s.task_id);if(i!==null)return r.update(s.task_id,i),t("Task updated","success"),!0}return e.status===!1&&t("Error: "+e.message,"error"),!1}
