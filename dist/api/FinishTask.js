import{get as e}from"../../snowpack/pkg/svelte/store.js";import{tasks as t}from"../stores/tasks.js";import{notify as o}from"../utils/notify.js";import{isOffline as r}from"../utils/offline.js";import{writeFile as f}from"../utils/fs.js";export async function FinishTaskLocal(s,i){t.finish(s,i),await f(e(t))}export async function FinishTask(s,i){if(r())return FinishTaskLocal(s,i);(await(await fetch("/api/finish",{method:"PATCH",body:JSON.stringify({task_id:s,status:i})})).json()).status?t.finish(s,i):o("Failed to mark the task as completed","error")}
